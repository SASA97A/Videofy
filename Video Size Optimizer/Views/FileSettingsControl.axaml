<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:vm="using:Video_Size_Optimizer.ViewModels"
			 xmlns:models="using:Video_Size_Optimizer.Models"
			 xmlns:app="using:Video_Size_Optimizer.Utils"
			 xmlns:conv="using:Video_Size_Optimizer.Converters"
			 xmlns:ctl="using:Video_Size_Optimizer.Controls"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="Video_Size_Optimizer.Views.FileSettingsControl"
             x:DataType="models:VideoFile">

	

	<UserControl.Styles>
		<Style Selector="ctl|TimeSegmentControl">
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="ClipToBounds" Value="True"/>
			<Setter Property="VerticalAlignment" Value="Center"/>
			<Setter Property="Foreground" Value="#00d26a"/>
			<Setter Property="FontFamily" Value="Consolas, Monospace"/>
		</Style>

		<Style Selector="ctl|TimeSegmentControl:pointerover">
			<Setter Property="Background" Value="#333333"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="Cursor" Value="SizeNorthSouth"/>
		</Style>
	</UserControl.Styles>

	<StackPanel Spacing="10" Width="250" Margin="10">
		<TextBlock Text="Per-File Settings" FontWeight="Bold" HorizontalAlignment="Center"/>
		<Separator Background="#333333"/>

				<StackPanel Spacing="2">				
					<TextBlock Text="Note: This file will ignore Compress Settings if custom values are set."
							   Foreground="White" FontSize="12" TextWrapping="Wrap" />
				</StackPanel>


				<StackPanel Spacing="5">
					<TextBlock Text="Target Size Override"
							   Foreground="#CCCCCC"
							   FontSize="12"
							   Margin="0,0,0,-10"/>
					<Grid ColumnDefinitions="*, Auto" VerticalAlignment="Center">
						<Slider Minimum="5"
								Maximum="{Binding MaxTargetMb}"
								Value="{Binding CustomTargetSizeMbSlider, Mode=TwoWay}"
								TickFrequency="5"
								IsSnapToTickEnabled="True"
								VerticalAlignment="Center"/>

						<Border Grid.Column="1"
								Background="#3d3d3d"
								CornerRadius="4"
								Width="55" Height="22"
								Margin="10,0,0,0"
								VerticalAlignment="Center">
							<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
								<TextBlock Text="{Binding CustomTargetSizeMbSlider}"
										   Foreground="White" FontSize="11" FontWeight="Bold"/>
								<TextBlock Text="MB" Foreground="#888888" FontSize="8" Margin="2,0,0,0" VerticalAlignment="Bottom"/>
							</StackPanel>
						</Border>
					</Grid>
				</StackPanel>		

		<TextBlock Text="Resolution:" FontSize="12" Foreground="#CCCCCC"/>
		<ComboBox ItemsSource="{x:Static app:AppConstants.AvailableResolutionNames}"
                  SelectedItem="{Binding CustomResolution, Mode=TwoWay}"
				  PlaceholderText="Use Global Setting"
                  HorizontalAlignment="Stretch"/>

		<TextBlock Text="FPS:" FontSize="12" Foreground="#CCCCCC"/>
		<ComboBox ItemsSource="{x:Static app:AppConstants.FpsOptions}"
                  SelectedItem="{Binding CustomFps, Mode=TwoWay}"
				  PlaceholderText="Use Global Setting"
                  HorizontalAlignment="Stretch"/>

		<StackPanel Spacing="5" Margin="0,10,0,0"  >
			<Grid ColumnDefinitions="*, Auto">
				<TextBlock Text="Trim Video" FontSize="12" Foreground="#CCCCCC"/>
				<TextBlock Grid.Column="1" Text="{Binding TrimDisplay}" FontSize="10" Foreground="#00d26a"/>
			</Grid>

			<Button Content="Enable Trimming"
					Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).LoadVideoDurationCommand}"
					CommandParameter="{Binding}"
					IsVisible="{Binding !IsDurationLoaded}"
					HorizontalAlignment="Stretch"
					HorizontalContentAlignment="Center"
					VerticalContentAlignment="Center"
					Background="#3d3d3d"
					BorderThickness="0"
					CornerRadius="4"
					Height="40"
					Cursor="Hand">

				<Button.Styles>
					<Style Selector="Button:pointerover /template/ ContentPresenter#PART_ContentPresenter">
						<Setter Property="Background" Value="#4d4d4d"/>
					</Style>

					<Style Selector="Button:pressed /template/ ContentPresenter#PART_ContentPresenter">
						<Setter Property="Background" Value="#2d2d2d"/>
					</Style>
				</Button.Styles>
			</Button>
			

			<Border Background="#1a1a1a" Margin="0,5,0,0" IsVisible="{Binding IsDurationLoaded}"
					CornerRadius="6"
					BorderBrush="#333333"
					BorderThickness="1"
					Padding="8">

				<StackPanel Spacing="10">

					<Grid ColumnDefinitions="45, 10, 30, Auto, 30, Auto, 30, Auto, 40">
						<TextBlock Text="START" VerticalAlignment="Center" FontSize="9" Foreground="#CCCCCC" FontWeight="Bold"/>

						<ctl:TimeSegmentControl Grid.Column="2" Value="{Binding StartHours}" Max="99"
												FontSize="14" Cursor="Hand" Width="30"/>
						<TextBlock Grid.Column="3" Text=":" VerticalAlignment="Center"/>

						<ctl:TimeSegmentControl Grid.Column="4" Value="{Binding StartMinutes}" Max="59"
												FontSize="14" Cursor="Hand" Width="30"/>
						<TextBlock Grid.Column="5" Text=":" VerticalAlignment="Center"/>

						<ctl:TimeSegmentControl Grid.Column="6" Value="{Binding StartSeconds}" Max="59"
												FontSize="14" Cursor="Hand" Width="30"/>
						<TextBlock Grid.Column="7" Text="." VerticalAlignment="Center"/>

						<ctl:TimeSegmentControl Grid.Column="8" Value="{Binding StartMilliseconds}" Max="999" Format="000"
												FontSize="14" Cursor="Hand" Width="40"/>
					</Grid>

					<Separator Height="1" Background="#222222"/>

					<Grid ColumnDefinitions="45, 10, 30, Auto, 30, Auto, 30, Auto, 40">
						<TextBlock Text="END" VerticalAlignment="Center" FontSize="9" Foreground="#CCCCCC" FontWeight="Bold"/>

						<ctl:TimeSegmentControl Grid.Column="2" Value="{Binding EndHours}" Max="99"
												FontSize="14" Cursor="Hand" Width="30"/>
						<TextBlock Grid.Column="3" Text=":" VerticalAlignment="Center"/>

						<ctl:TimeSegmentControl Grid.Column="4" Value="{Binding EndMinutes}" Max="59"
												FontSize="14" Cursor="Hand" Width="30"/>
						<TextBlock Grid.Column="5" Text=":" VerticalAlignment="Center"/>

						<ctl:TimeSegmentControl Grid.Column="6" Value="{Binding EndSeconds}" Max="59"
												FontSize="14" Cursor="Hand" Width="30"/>
						<TextBlock Grid.Column="7" Text="." VerticalAlignment="Center"/>

						<ctl:TimeSegmentControl Grid.Column="8" Value="{Binding EndMilliseconds}" Max="999" Format="000"
												FontSize="14" Cursor="Hand" Width="40"/>
					</Grid>

				</StackPanel>
			</Border>

			<TextBlock Text="Scroll to adjust â€¢ Drag up/down to scrub"
					   IsVisible="{Binding IsDurationLoaded}"
					   FontSize="11" Foreground="#CCCCCC" HorizontalAlignment="Center" FontStyle="Italic" Margin="0,5,0,0"/>
		
				
			
		</StackPanel>

			

		<Button Content="Reset"
                Command="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).ClearCustomSettingsCommand}"
                CommandParameter="{Binding}"
                HorizontalAlignment="Stretch" HorizontalContentAlignment="Center"
				Background="#443333" Margin="0,10,0,0" Height="40" VerticalContentAlignment="Center"/>
			</StackPanel>
		

</UserControl>
